# Aston
Релизация REST сервиса на основе JDBC и SERVLET.

# Домашнее задание #2. Java.
## Цели и задачи. 
Выполнение данной работы представляет решение следующих задач:
  1. Разработка REST сервиса на Java 21.
     - Создание сущностей.
     - Реализация CRUD-операций для нескольких сущностей.
     - Настройка структуры проекта с выделением слоев приложения.
     - Создание DAO-слоя для взаимодействия с базой данных через JDBC.
     - Создание сервисного слоя (Service) для обработки бизнес-логики.
     - Разработка сервлетов для обработки HTTP-запросов и возврата DTO.    
  2. Запуск приложения на сервере Tomcat (в Docker).
  3. Покрытие тестами JUnit 5 с импользованием testcontainers и Mockito.

Архитектурные требования:
  1. Разделение на слои:
     - Сервлеты (контроллеры)
     - Сервисный слой (бизнес-логика)
     - Репозитории (работа с БД через JDBC)
  2. Использование DTO передачи данных между слоями.
  3. Отражение связей ManyToOne, OneToMany в коде.
  4. Двусторонние связи между сущностями.

## Общая структура проекта.

* `src.main.java`- пакет, содержащий файлы с кодом
  *  `connectDB` - подключение к базе данных..
  *  `DAO` - слой доступа к БД.
  *  `DTO` - объекты передачи данных.
  *  `exception` - свои исключения.
  *  `mapper` - маппинг сущностей и DTO.
  *  `model` - модели сущностей.
  *  `service` - сервисный слой с бизнес-логикой.
  *  `servlet` - слой контроллеров для обработки HTTP-запросов.
  *  `systemListener` - системные слушатели для инициализации приложения. 
* `resources` - файлы конфигурации.
  *  `dbconfig.properties` - параметры подключения к базе данных.
  *  `init.sql` - SQL-скрипт для инициализации базы данных.
* `test.java`- пакет, содержащий тесты JUnit.
  *  `DAOtest` -  тесты для слоя DAO.
  *  `ServiceTest` - тесты для сервисного слоя.
  *  `ServletTest` - тесты для слоя сервлетов.
  *  `Suite` - тестовый набор для запуска всех тестов.
*  `docker-compose.yml` - конфигурация Docker Compose для развертывания в Docker PostgresSQL.
*  `dockerfile` - Dockerfile для сборки образа приложения.

### Обрабатываемые запросы
* GET /customer/ - получение всех заказчиков
* GET /customer/{id} - получение заказчика с указанным id
* DELETE /customer/{id} - удаление заказчика по id(удаляются и все его заказы)
* POST /customer - создание заказчика
* PUT /customer/{id} - обновление данных о заказчике
* GET /order/ - получение всех заказов
* GET /order/{id} - получение заказа с указанным id
* DELETE /order/{id} - удаление заказа
* POST /order?customer_id=? - добавление заказа с привязкой к заказчику
* PUT /order/{id} - обновление данных о заказе
 
